{% extends "base.html" %}

{% block page_header %}
    <h1><label>Pool:</label> {{ pool }}</h1>
{% endblock %}

{% block content %}
    {% if pool.decription %}
        <p>{{ pool.description }}</p>
    {% endif %}

    {% include "pools/_pool_overview.html" %}

    <section>
        <h3>Your Status</h3>
        <ul>
            <li>
                {% if entry.active %}
                    Still alive
                {% else %}
                    Out of the running
                {% endif %}
            </li>
            <li>
                {% if entry.paid %}
                    Paid up
                {% else %}
                    Unpaid
                {% endif %}
            </li>
        </ul>
    </section>

    <section>
        <h3>Invitation Code</h3>
        {% set invite_url = url('join-pool', pool|id, pool.invite_code, _full=True) %}
        {% if pool.invite_only %}
            <p>The invitation code for joining this pool is:<br>
            <span class="invite-code">{{ pool.invite_code }}</span></p>

            <p>You can share the following link with your friends to invite them to join this pool:<br>
            <a href="{{ invite_url }}">{{ invite_url }}</a></p>
        {% else %}
            <p>This is a public pool, open to anyone. Invite your friends to join it by sharing this link:<br>
            <a href="{{ invite_url }}">{{ invite_url }}</a></p>
        {% endif %}
    </section>
    
    <section>
        <h3>Currently Picking <strong>{{ week }}</strong></h3>
        <p>Deadline: {{ week.start }}.</p>
    </section>

    <section>
        <h3>Winning Entries</h3>
        <p>There are {{ active_entries|length }} players still alive.</p>
        <ol>
            {% for entry in active_entries %}
                <li><a href="{{ url('entry', pool.key().id(), entry.key().id()) }}">{{ entry.account }}</a></li>
            {% else %}
                <li>None</li>
            {% endfor %}
        </ol>
    </section>

    <section>
        <h3>Losing Entries</h3>
        <p>{{ inactive_entries|length }} players have already lost.</p>
    </section>
{% endblock %}